var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r,n={exports:{}},i={exports:{}},o={},h={};var s,u,f,a,c={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function l(){return s||(s=1,c.read=function(t,e,r,n,i){var o,h,s=8*i-n-1,u=(1<<s)-1,f=u>>1,a=-7,c=r?i-1:0,l=r?-1:1,p=t[e+c];for(c+=l,o=p&(1<<-a)-1,p>>=-a,a+=s;a>0;o=256*o+t[e+c],c+=l,a-=8);for(h=o&(1<<-a)-1,o>>=-a,a+=n;a>0;h=256*h+t[e+c],c+=l,a-=8);if(0===o)o=1-f;else{if(o===u)return h?NaN:1/0*(p?-1:1);h+=Math.pow(2,n),o-=f}return(p?-1:1)*h*Math.pow(2,o-n)},c.write=function(t,e,r,n,i,o){var h,s,u,f=8*o-i-1,a=(1<<f)-1,c=a>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,g=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,h=a):(h=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-h))<1&&(h--,u*=2),(e+=h+c>=1?l/u:l*Math.pow(2,1-c))*u>=2&&(h++,u/=2),h+c>=a?(s=0,h=a):h+c>=1?(s=(e*u-1)*Math.pow(2,i),h+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),h=0));i>=8;t[r+p]=255&s,p+=g,s/=256,i-=8);for(h=h<<i|s,f+=i;f>0;t[r+p]=255&h,p+=g,h/=256,f-=8);t[r+p-g]|=128*d}),c}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function p(){return u||(u=1,function(t){var e=function(){if(r)return h;r=1,h.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},h.toByteArray=function(t){var r,i,o=s(t),h=o[0],u=o[1],f=new n(function(t,e,r){return 3*(e+r)/4-r}(0,h,u)),a=0,c=u>0?h-4:h;for(i=0;i<c;i+=4)r=e[t.charCodeAt(i)]<<18|e[t.charCodeAt(i+1)]<<12|e[t.charCodeAt(i+2)]<<6|e[t.charCodeAt(i+3)],f[a++]=r>>16&255,f[a++]=r>>8&255,f[a++]=255&r;return 2===u&&(r=e[t.charCodeAt(i)]<<2|e[t.charCodeAt(i+1)]>>4,f[a++]=255&r),1===u&&(r=e[t.charCodeAt(i)]<<10|e[t.charCodeAt(i+1)]<<4|e[t.charCodeAt(i+2)]>>2,f[a++]=r>>8&255,f[a++]=255&r),f},h.fromByteArray=function(e){for(var r,n=e.length,i=n%3,o=[],h=16383,s=0,u=n-i;s<u;s+=h)o.push(f(e,s,s+h>u?u:s+h));return 1===i?(r=e[n-1],o.push(t[r>>2]+t[r<<4&63]+"==")):2===i&&(r=(e[n-2]<<8)+e[n-1],o.push(t[r>>10]+t[r>>4&63]+t[r<<2&63]+"=")),o.join("")};for(var t=[],e=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)t[o]=i[o],e[i.charCodeAt(o)]=o;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[63&e]}function f(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(u(n));return i.join("")}return e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63,h}(),n=l();t.Buffer=s,t.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},t.INSPECT_MAX_BYTES=50;var i=2147483647;function o(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=s.prototype,e}function s(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return a(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|g(t,e),n=o(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return c(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(N(t,ArrayBuffer)||t&&N(t.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=s.prototype,n}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return s.from(n,e,r);var i=function(t){if(s.isBuffer(t)){var e=0|p(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||W(t.length)?o(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function a(t){return f(t),o(t<0?0:0|p(t))}function c(t){for(var e=t.length<0?0:0|p(t.length),r=o(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function g(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||N(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return P(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(t).length;default:if(i)return n?-1:P(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),W(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,h=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;h=2,s/=2,u/=2,r/=2}function f(t,e){return 1===h?t[e]:t.readUInt16BE(e*h)}if(i){var a=-1;for(o=r;o<s;o++)if(f(t,o)===f(e,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===u)return a*h}else-1!==a&&(o-=o-a),a=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var c=!0,l=0;l<u;l++)if(f(t,o+l)!==f(e,l)){c=!1;break}if(c)return o}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var h=0;h<n;++h){var s=parseInt(e.substr(2*h,2),16);if(W(s))return h;t[r+h]=s}return h}function b(t,e,r,n){return H(P(e,t.length-r),t,r,n)}function _(t,e,r,n){return H(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return _(t,e,r,n)}function B(t,e,r,n){return H(j(e),t,r,n)}function S(t,e,r,n){return H(function(t,e){for(var r,n,i,o=[],h=0;h<t.length&&!((e-=2)<0);++h)n=(r=t.charCodeAt(h))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function A(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function T(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,h,s,u,f=t[i],a=null,c=f>239?4:f>223?3:f>191?2:1;if(i+c<=r)switch(c){case 1:f<128&&(a=f);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&f)<<6|63&o)>127&&(a=u);break;case 3:o=t[i+1],h=t[i+2],128==(192&o)&&128==(192&h)&&(u=(15&f)<<12|(63&o)<<6|63&h)>2047&&(u<55296||u>57343)&&(a=u);break;case 4:o=t[i+1],h=t[i+2],s=t[i+3],128==(192&o)&&128==(192&h)&&128==(192&s)&&(u=(15&f)<<18|(63&o)<<12|(63&h)<<6|63&s)>65535&&u<1114112&&(a=u)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return function(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}(n)}t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(t,e,r){return u(t,e,r)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(t,e,r){return function(t,e,r){return f(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}(t,e,r)},s.allocUnsafe=function(t){return a(t)},s.allocUnsafeSlow=function(t){return a(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(N(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),N(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=s.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(N(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},s.byteLength=g,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):d.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(t,e,r,n,i){if(N(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),h=(r>>>=0)-(e>>>=0),u=Math.min(o,h),f=this.slice(n,i),a=t.slice(e,r),c=0;c<u;++c)if(f[c]!==a[c]){o=f[c],h=a[c];break}return o<h?-1:h<o?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return _(this,t,e,r);case"latin1":case"binary":return E(this,t,e,r);case"base64":return B(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function R(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=O(t[o]);return i}function U(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function C(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,r,n,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function F(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(t,e,r,i,o){return e=+e,r>>>=0,o||F(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function z(t,e,r,i,o){return e=+e,r>>>=0,o||F(t,0,r,8),n.write(t,e,r,i,52,8),r+8}s.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=s.prototype,n},s.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},s.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||I(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},s.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||I(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},s.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);I(this,t,e,r,i-1,-i)}var o=0,h=1,s=0;for(this[e]=255&t;++o<r&&(h*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/h|0)-s&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);I(this,t,e,r,i-1,-i)}var o=r-1,h=1,s=0;for(this[e+o]=255&t;--o>=0&&(h*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/h|0)-s&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,r){return K(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return K(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return z(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return z(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=i-1;o>=0;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},s.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var h=s.isBuffer(t)?t:s.from(t,n),u=h.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=h[o%u]}return this};var M=/[^+/0-9A-Za-z-_]/g;function O(t){return t<16?"0"+t.toString(16):t.toString(16)}function P(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],h=0;h<n;++h){if((r=t.charCodeAt(h))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(h+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function N(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function W(t){return t!=t}}(o)),o}
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */function g(){if(a)return n.exports;a=1;var e=65536,r=4294967295;var o=(f||(f=1,function(t,e){var r=p(),n=r.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}(i,i.exports)),i.exports).Buffer,h=t.crypto||t.msCrypto;return h&&h.getRandomValues?n.exports=function(t,n){if(t>r)throw new RangeError("requested too many random bytes");var i=o.allocUnsafe(t);if(t>0)if(t>e)for(var s=0;s<t;s+=e)h.getRandomValues(i.slice(s,s+e));else h.getRandomValues(i);if("function"==typeof n)return process.nextTick(function(){n(null,i)});return i}:n.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")},n.exports}var d,y,v={},m={};function w(){if(y)return d;function t(t,e){if(!t)throw new Error(e||"Assertion failed")}return y=1,d=t,t.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)},d}var b,_,E={exports:{}};function B(){if(_)return m;_=1;var t=w(),e=(b||(b=1,"function"==typeof Object.create?E.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:E.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}),E.exports);function r(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function n(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function i(t){return 1===t.length?"0"+t:t}function o(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}return m.inherits=e,m.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),o=0;o<t.length;o+=2)n.push(parseInt(t[o]+t[o+1],16))}else for(var i=0,o=0;o<t.length;o++){var h=t.charCodeAt(o);h<128?n[i++]=h:h<2048?(n[i++]=h>>6|192,n[i++]=63&h|128):r(t,o)?(h=65536+((1023&h)<<10)+(1023&t.charCodeAt(++o)),n[i++]=h>>18|240,n[i++]=h>>12&63|128,n[i++]=h>>6&63|128,n[i++]=63&h|128):(n[i++]=h>>12|224,n[i++]=h>>6&63|128,n[i++]=63&h|128)}else for(o=0;o<t.length;o++)n[o]=0|t[o];return n},m.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=i(t[r].toString(16));return e},m.htonl=n,m.toHex32=function(t,e){for(var r="",i=0;i<t.length;i++){var h=t[i];"little"===e&&(h=n(h)),r+=o(h.toString(16))}return r},m.zero2=i,m.zero8=o,m.join32=function(e,r,n,i){var o=n-r;t(o%4==0);for(var h=new Array(o/4),s=0,u=r;s<h.length;s++,u+=4){var f;f="big"===i?e[u]<<24|e[u+1]<<16|e[u+2]<<8|e[u+3]:e[u+3]<<24|e[u+2]<<16|e[u+1]<<8|e[u],h[s]=f>>>0}return h},m.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},m.rotr32=function(t,e){return t>>>e|t<<32-e},m.rotl32=function(t,e){return t<<e|t>>>32-e},m.sum32=function(t,e){return t+e>>>0},m.sum32_3=function(t,e,r){return t+e+r>>>0},m.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},m.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},m.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,h=(o<n?1:0)+r+i;t[e]=h>>>0,t[e+1]=o},m.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},m.sum64_lo=function(t,e,r,n){return e+n>>>0},m.sum64_4_hi=function(t,e,r,n,i,o,h,s){var u=0,f=e;return u+=(f=f+n>>>0)<e?1:0,u+=(f=f+o>>>0)<o?1:0,t+r+i+h+(u+=(f=f+s>>>0)<s?1:0)>>>0},m.sum64_4_lo=function(t,e,r,n,i,o,h,s){return e+n+o+s>>>0},m.sum64_5_hi=function(t,e,r,n,i,o,h,s,u,f){var a=0,c=e;return a+=(c=c+n>>>0)<e?1:0,a+=(c=c+o>>>0)<o?1:0,a+=(c=c+s>>>0)<s?1:0,t+r+i+h+u+(a+=(c=c+f>>>0)<f?1:0)>>>0},m.sum64_5_lo=function(t,e,r,n,i,o,h,s,u,f){return e+n+o+s+f>>>0},m.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},m.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},m.shr64_hi=function(t,e,r){return t>>>r},m.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},m}var S,A={};function T(){if(S)return A;S=1;var t=B(),e=w();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return A.BlockHash=r,r.prototype.update=function(e,r){if(e=t.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=t.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},r.prototype.digest=function(t){return this.update(this._pad()),e(null===this.pending),this._digest(t)},r.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n},A}var x,k,L,R,U,C,I,F,K,z,M,O,P={},j={};function H(){if(x)return j;x=1;var t=B().rotr32;function e(t,e,r){return t&e^~t&r}function r(t,e,r){return t&e^t&r^e&r}function n(t,e,r){return t^e^r}return j.ft_1=function(t,i,o,h){return 0===t?e(i,o,h):1===t||3===t?n(i,o,h):2===t?r(i,o,h):void 0},j.ch32=e,j.maj32=r,j.p32=n,j.s0_256=function(e){return t(e,2)^t(e,13)^t(e,22)},j.s1_256=function(e){return t(e,6)^t(e,11)^t(e,25)},j.g0_256=function(e){return t(e,7)^t(e,18)^e>>>3},j.g1_256=function(e){return t(e,17)^t(e,19)^e>>>10},j}function N(){if(U)return R;U=1;var t=B(),e=T(),r=H(),n=w(),i=t.sum32,o=t.sum32_4,h=t.sum32_5,s=r.ch32,u=r.maj32,f=r.s0_256,a=r.s1_256,c=r.g0_256,l=r.g1_256,p=e.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function d(){if(!(this instanceof d))return new d;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}return t.inherits(d,p),R=d,d.blockSize=512,d.outSize=256,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(t,e){for(var r=this.W,p=0;p<16;p++)r[p]=t[e+p];for(;p<r.length;p++)r[p]=o(l(r[p-2]),r[p-7],c(r[p-15]),r[p-16]);var g=this.h[0],d=this.h[1],y=this.h[2],v=this.h[3],m=this.h[4],w=this.h[5],b=this.h[6],_=this.h[7];for(n(this.k.length===r.length),p=0;p<r.length;p++){var E=h(_,a(m),s(m,w,b),this.k[p],r[p]),B=i(f(g),u(g,d,y));_=b,b=w,w=m,m=i(v,E),v=y,y=d,d=g,g=i(E,B)}this.h[0]=i(this.h[0],g),this.h[1]=i(this.h[1],d),this.h[2]=i(this.h[2],y),this.h[3]=i(this.h[3],v),this.h[4]=i(this.h[4],m),this.h[5]=i(this.h[5],w),this.h[6]=i(this.h[6],b),this.h[7]=i(this.h[7],_)},d.prototype._digest=function(e){return"hex"===e?t.toHex32(this.h,"big"):t.split32(this.h,"big")},R}function W(){if(K)return F;K=1;var t=B(),e=T(),r=w(),n=t.rotr64_hi,i=t.rotr64_lo,o=t.shr64_hi,h=t.shr64_lo,s=t.sum64,u=t.sum64_hi,f=t.sum64_lo,a=t.sum64_4_hi,c=t.sum64_4_lo,l=t.sum64_5_hi,p=t.sum64_5_lo,g=e.BlockHash,d=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=d,this.W=new Array(160)}function v(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function m(t,e,r,n,i,o){var h=e&n^~e&o;return h<0&&(h+=4294967296),h}function b(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function _(t,e,r,n,i,o){var h=e&n^e&o^n&o;return h<0&&(h+=4294967296),h}function E(t,e){var r=n(t,e,28)^n(e,t,2)^n(e,t,7);return r<0&&(r+=4294967296),r}function S(t,e){var r=i(t,e,28)^i(e,t,2)^i(e,t,7);return r<0&&(r+=4294967296),r}function A(t,e){var r=n(t,e,14)^n(t,e,18)^n(e,t,9);return r<0&&(r+=4294967296),r}function x(t,e){var r=i(t,e,14)^i(t,e,18)^i(e,t,9);return r<0&&(r+=4294967296),r}function k(t,e){var r=n(t,e,1)^n(t,e,8)^o(t,e,7);return r<0&&(r+=4294967296),r}function L(t,e){var r=i(t,e,1)^i(t,e,8)^h(t,e,7);return r<0&&(r+=4294967296),r}function R(t,e){var r=n(t,e,19)^n(e,t,29)^o(t,e,6);return r<0&&(r+=4294967296),r}function U(t,e){var r=i(t,e,19)^i(e,t,29)^h(t,e,6);return r<0&&(r+=4294967296),r}return t.inherits(y,g),F=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=R(r[n-4],r[n-3]),o=U(r[n-4],r[n-3]),h=r[n-14],s=r[n-13],u=k(r[n-30],r[n-29]),f=L(r[n-30],r[n-29]),l=r[n-32],p=r[n-31];r[n]=a(i,o,h,s,u,f,l,p),r[n+1]=c(i,o,h,s,u,f,l,p)}},y.prototype._update=function(t,e){this._prepareBlock(t,e);var n=this.W,i=this.h[0],o=this.h[1],h=this.h[2],a=this.h[3],c=this.h[4],g=this.h[5],d=this.h[6],y=this.h[7],w=this.h[8],B=this.h[9],T=this.h[10],k=this.h[11],L=this.h[12],R=this.h[13],U=this.h[14],C=this.h[15];r(this.k.length===n.length);for(var I=0;I<n.length;I+=2){var F=U,K=C,z=A(w,B),M=x(w,B),O=v(w,B,T,k,L),P=m(w,B,T,k,L,R),j=this.k[I],H=this.k[I+1],N=n[I],W=n[I+1],$=l(F,K,z,M,O,P,j,H,N,W),q=p(F,K,z,M,O,P,j,H,N,W);F=E(i,o),K=S(i,o),z=b(i,o,h,a,c),M=_(i,o,h,a,c,g);var D=u(F,K,z,M),Y=f(F,K,z,M);U=L,C=R,L=T,R=k,T=w,k=B,w=u(d,y,$,q),B=f(y,y,$,q),d=c,y=g,c=h,g=a,h=i,a=o,i=u($,q,D,Y),o=f($,q,D,Y)}s(this.h,0,i,o),s(this.h,2,h,a),s(this.h,4,c,g),s(this.h,6,d,y),s(this.h,8,w,B),s(this.h,10,T,k),s(this.h,12,L,R),s(this.h,14,U,C)},y.prototype._digest=function(e){return"hex"===e?t.toHex32(this.h,"big"):t.split32(this.h,"big")},F}function $(){return O||(O=1,P.sha1=function(){if(L)return k;L=1;var t=B(),e=T(),r=H(),n=t.rotl32,i=t.sum32,o=t.sum32_5,h=r.ft_1,s=e.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(f,s),k=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,s=0;s<16;s++)r[s]=t[e+s];for(;s<r.length;s++)r[s]=n(r[s-3]^r[s-8]^r[s-14]^r[s-16],1);var f=this.h[0],a=this.h[1],c=this.h[2],l=this.h[3],p=this.h[4];for(s=0;s<r.length;s++){var g=~~(s/20),d=o(n(f,5),h(g,a,c,l),p,r[s],u[g]);p=l,l=c,c=n(a,30),a=f,f=d}this.h[0]=i(this.h[0],f),this.h[1]=i(this.h[1],a),this.h[2]=i(this.h[2],c),this.h[3]=i(this.h[3],l),this.h[4]=i(this.h[4],p)},f.prototype._digest=function(e){return"hex"===e?t.toHex32(this.h,"big"):t.split32(this.h,"big")},k}(),P.sha224=function(){if(I)return C;I=1;var t=B(),e=N();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),C=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(e){return"hex"===e?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},C}(),P.sha256=N(),P.sha384=function(){if(M)return z;M=1;var t=B(),e=W();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),z=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(e){return"hex"===e?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},z}(),P.sha512=W()),P}var q,D,Y,J,V,X,Z,G,Q,tt,et={};function rt(){return J||(J=1,function(t){var e=t;e.utils=B(),e.common=T(),e.sha=$(),e.ripemd=function(){if(q)return et;q=1;var t=B(),e=T(),r=t.rotl32,n=t.sum32,i=t.sum32_3,o=t.sum32_4,h=e.BlockHash;function s(){if(!(this instanceof s))return new s;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function a(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}t.inherits(s,h),et.ripemd160=s,s.blockSize=512,s.outSize=160,s.hmacStrength=192,s.padLength=64,s.prototype._update=function(t,e){for(var h=this.h[0],s=this.h[1],d=this.h[2],y=this.h[3],v=this.h[4],m=h,w=s,b=d,_=y,E=v,B=0;B<80;B++){var S=n(r(o(h,u(B,s,d,y),t[c[B]+e],f(B)),p[B]),v);h=v,v=y,y=r(d,10),d=s,s=S,S=n(r(o(m,u(79-B,w,b,_),t[l[B]+e],a(B)),g[B]),E),m=E,E=_,_=r(b,10),b=w,w=S}S=i(this.h[1],d,_),this.h[1]=i(this.h[2],y,E),this.h[2]=i(this.h[3],v,m),this.h[3]=i(this.h[4],h,w),this.h[4]=i(this.h[0],s,b),this.h[0]=S},s.prototype._digest=function(e){return"hex"===e?t.toHex32(this.h,"little"):t.split32(this.h,"little")};var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return et}(),e.hmac=function(){if(Y)return D;Y=1;var t=B(),e=w();function r(e,n,i){if(!(this instanceof r))return new r(e,n,i);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(n,i))}return D=r,r.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),e(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=(new this.Hash).update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=(new this.Hash).update(t)},r.prototype.update=function(t,e){return this.inner.update(t,e),this},r.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},D}(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(v)),v}var nt=function(){if(tt)return Q;tt=1;const t=g(),e=function(){if(X)return V;X=1;const t=rt();return V=function(e,r){let n=t.sha256().update(e).digest("hex");return"hex"===r?n:Buffer.from(n,"hex").toString(r||"base64")}}(),r=function(){if(G)return Z;G=1;const t=rt();return Z=function(e,r,n,i){let o=t.hmac(t.sha256,Buffer.from(e,r)).update(n).digest("hex");return"hex"===i?o:Buffer.from(o,"hex").toString(i||"base64")}}(),n=264,i=32;return Q=class{constructor(t){t=t||{},this.keyFormat=t.keyFormat||"base64",this.signatureFormat=t.signatureFormat||"base64",this.hashEncoding=t.hashEncoding||"base64",this.seedEncoding=t.seedEncoding||"base64",this.sha256=e,this.hmacSha256=r,"object"===this.keyFormat?(this.encodeKey=t=>t,this.decodeKey=t=>(this._validateRawKeyFormat(t),t)):"json"===this.keyFormat?(this.encodeKey=t=>JSON.stringify(t),this.decodeKey=t=>{let e=JSON.parse(t);return this._validateRawKeyFormat(e),e}):"buffer"===this.keyFormat?(this.encodeKey=t=>this._encodeKeyToBuffer(t),this.decodeKey=t=>this._decodeKeyFromBuffer(t)):(this.encodeKey=t=>this._encodeKeyToBuffer(t).toString(this.keyFormat),this.decodeKey=t=>{let e=Buffer.from(t,this.keyFormat);return this._decodeKeyFromBuffer(e)}),"object"===this.signatureFormat?(this.encodeSignature=t=>t,this.decodeSignature=t=>(this._validateRawSignatureFormat(t),[...t])):"json"===this.signatureFormat?(this.encodeSignature=t=>JSON.stringify(t),this.decodeSignature=t=>{let e=JSON.parse(t);return this._validateRawSignatureFormat(e),e}):"buffer"===this.signatureFormat?(this.encodeSignature=t=>this._encodeSignatureToBuffer(t),this.decodeSignature=t=>this._decodeSignatureFromBuffer(t)):(this.encodeSignature=t=>this._encodeSignatureToBuffer(t).toString(this.signatureFormat),this.decodeSignature=t=>{let e=Buffer.from(t,this.signatureFormat);return this._decodeSignatureFromBuffer(e)})}generateSeed(){return t(32).toString(this.seedEncoding)}getRawPublicKeyFromRawPrivateKey(t){return t.map(t=>this.sha256(t,this.hashEncoding))}getPublicKeyFromPrivateKey(t){let e=this.decodeKey(t);return this.encodeKey(this.getRawPublicKeyFromRawPrivateKey(e))}generateKeysFromSeed(t,e){if(Buffer.from(t,this.seedEncoding).byteLength<32)throw new Error(`The specified seed encoded as ${this.seedEncoding} did not meet the minimum seed length requirement of 32 bytes - Check that the seed encoding is correct`);null==e&&(e=0);let r=this.generateRandomArrayFromSeed(n,t,e),i=this.getRawPublicKeyFromRawPrivateKey(r);return{privateKey:this.encodeKey(r),publicKey:this.encodeKey(i)}}generateKeys(){let t=this.generateRandomArray(n,i),e=this.getRawPublicKeyFromRawPrivateKey(t);return{privateKey:this.encodeKey(t),publicKey:this.encodeKey(e)}}sign(t,e){let r=this.decodeKey(e),n=this.sha256(t,this.hashEncoding),i=this.convertEncodedStringToBitArray(n),o=i.reduce((t,e)=>t+(1^e),0),h=Buffer.alloc(1).fill(o),s=this.convertBufferToBitArray(h);for(let t of s)i.push(t);let u=i.map((t,e)=>t?r[e]:null).filter(t=>t);return this.encodeSignature(u)}verify(t,e,r){let n,i;try{n=this.decodeSignature(e),i=this.decodeKey(r)}catch(t){return!1}let o=n.reverse(),h=this.sha256(t,this.hashEncoding),s=this.convertEncodedStringToBitArray(h),u=s.reduce((t,e)=>t+(1^e),0),f=Buffer.alloc(1).fill(u),a=this.convertBufferToBitArray(f);for(let t of a)s.push(t);return s.every((t,e)=>{if(!t)return!0;if(!o.length)return!1;let r=o.pop();return this.sha256(r,this.hashEncoding)===i[e]})}generateRandomArray(e,r){let n=[];for(let i=0;i<e;i++)n.push(t(r).toString(this.hashEncoding));return n}generateRandomArrayFromSeed(t,e,r){let n=[];for(let i=0;i<t;i++)n.push(this.hmacSha256(e,this.seedEncoding,`${r}-${i}`,this.hashEncoding));return n}convertBufferToBitArray(t){let e=[];for(let r of t)for(let t=0;t<8;t++)e.push(r>>7-t&1);return e}convertEncodedStringToBitArray(t){let e=Buffer.from(t,this.hashEncoding);return this.convertBufferToBitArray(e)}_validateRawKeyFormat(t){if(!Array.isArray(t))throw new Error("The specified key was in an invalid format - Expected an array");if(t.length!==n)throw new Error(`The specified key had an invalid length - Contained ${t.length} items but expected 264 items`);if(!t.every(t=>"string"==typeof t&&Buffer.byteLength(t,this.hashEncoding)===i))throw new Error("The specified key contained invalid items")}_validateRawSignatureFormat(t){if(!Array.isArray(t))throw new Error("The specified signature was in an invalid format - Expected an array");if(t.length>n)throw new Error(`The specified signature had an invalid length - Contained ${t.length} items but expected no more than 264 items`);if(!t.every(t=>"string"==typeof t&&Buffer.byteLength(t,this.hashEncoding)===i))throw new Error("The specified signature contained invalid items")}_encodeKeyToBuffer(t){let e=[];for(let r of t)e.push(Buffer.from(r,this.hashEncoding));return Buffer.concat(e)}_decodeKeyFromBuffer(t){let e=[];if(8448!==t.byteLength)throw new Error(`The specified key had an invalid length - Was ${t.byteLength} but expected 8448 bytes`);let r=t.byteLength/i;for(let n=0;n<r;n++){let r=n*i,o=t.slice(r,r+i);e.push(o.toString(this.hashEncoding))}return e}_encodeSignatureToBuffer(t){let e=[];for(let r of t)e.push(Buffer.from(r,this.hashEncoding));return Buffer.concat(e)}_decodeSignatureFromBuffer(t){let e=[];if(t.byteLength>8448)throw new Error(`The specified key had an invalid length - Was ${t.byteLength} but expected no more than 8448 bytes`);if(t.byteLength%i!==0)throw new Error(`The specified key had an invalid length - Was ${t.byteLength} bytes but expected it to be a multiple of 32`);let r=t.byteLength/i;for(let n=0;n<r;n++){let r=n*i,o=t.slice(r,r+i);e.push(o.toString(this.hashEncoding))}return e}},Q}(),it=e(nt);export{it as default};
